!function(a,b){"use strict";"function"==typeof define&&define.amd?define([],function(){return b(a)}):a.saveAs=a.saveAs||b(a)}(this,function(a,b){"use strict";function c(b,c){return a.navigator.msSaveOrOpenBlob(j(b),c)}function d(a,b){return new e(a,b)}function e(a,c){function d(){v=k().createObjectURL(a),p.href=v,p.download=c,w(function(){n(),g(y),l(v),y.readyState=y.DONE},0)}function e(){if(o.chrome&&z&&z!==t){var b=a.slice||a.webkitSlice;a=b.call(a,0,a.size,t),A=!0}}function f(){r&&"download"!==c&&(c+=".download"),(z===t||r)&&(x=o)}function m(){(A||!v)&&(v=k().createObjectURL(a)),u(v)}function u(a,c,d){if(x)x.location.href=a;else{var e=o.open(a,"_blank");e===b&&(o.location.href=a)}y.readyState=y.DONE,d?h(y,"writeend",d):g(y),l(c||a)}this.blob=a=j(a),this.saveUsingObjectURLs=m,this.execSave=u;var v,x,y=this,z=a.type,A=!1;return y.readyState=y.INIT,c=c||"download",q?d():(e(),f(),s?i(y):m())}function f(){var a=this;a.readyState=a.DONE,h(a,"abort")}function g(a){h(a,"writestart progress write writeend".split(" "))}function h(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"==typeof e)try{e.call(a,c||a)}catch(f){m(f)}}}function i(a){function b(b){b.root.getDirectory("temp",e,d(c),a.saveUsingObjectURLs)}function c(b){function c(a){a.remove(function(){g()})}function f(b){"NotFoundError"===b.name?g():a.saveUsingObjectURLs()}function g(){b.getFile(name,e,d(h),a.saveUsingObjectURLs)}function h(b){function c(c){function d(c){a.execSave(b.toURL(),b,c)}function e(){var b=c.error;b.code!==b.ABORT_ERR&&a.saveUsingObjectURLs()}function f(){"writestart progress write abort".split(" ").forEach(function(b){c["on"+b]=a["on"+b]})}function g(){c.abort(),a.readyState=a.DONE}c.onwriteend=d,c.onerror=e,f(),c.write(blob),a.abort=g,a.readyState=a.WRITING}b.createWriter(d(c),a.saveUsingObjectURLs)}b.getFile(name,{create:!1},d(c),d(f))}function d(b){return function(){return a.readyState!==a.DONE?b.apply(this,arguments):void 0}}u+=a.blob.size;var e={create:!0,exclusive:!1};s(o.TEMPORARY,u,d(b),a.saveUsingObjectURLs)}function j(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\ufeff",a],{type:a.type}):a}function k(){return o.URL||o.webkitURL||o}function l(a){function b(){"string"==typeof a?k().revokeObjectURL(a):a.remove(function(){})}setTimeout(b,v)}function m(a){w(function(){throw a},0)}function n(){var a=new MouseEvent("click");p.dispatchEvent(a)}if(a.navigator!==b){if(/MSIE [1-9]\./.test(a.navigator.userAgent))return;if(a.navigator.msSaveOrOpenBlob)return c}var o=a.self||a.window||a.content,p=o.document.createElementNS("http://www.w3.org/1999/xhtml","a"),q="download"in p,r=o.webkitRequestFileSystem,s=o.requestFileSystem||r||o.mozRequestFileSystem,t="application/octet-stream",u=0,v=500,w=o.setImmediate||o.setTimeout,x=e.prototype;return x.abort=f,x.INIT=0,x.WRITING=1,x.DONE=2,x.readyState=x.INIT,x.error=null,x.onwritestart=null,x.onprogress=null,x.onwrite=null,x.onabort=null,x.onerror=null,x.onwriteend=null,d});